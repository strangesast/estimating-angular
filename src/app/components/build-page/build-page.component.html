<div class="navigation">
  <ul class="toggle" *ngIf="nestConfig">
    <li *ngFor="let folderName of nestConfig.folders.order" [class.active]="nestConfig.folders.enabled[folderName]" (click)="toggleFolderVisibility(folderName, $event.ctrlKey)" class="hoverlink noselect">
      <span [ngClass]="FOLDER_ICONS[folderName]"></span>
      <span>{{ folderName[0].toUpperCase() + folderName.slice(1) }}</span>
    <li [class.active]="nestConfig.component.enabled" (click)="toggleComponentVisibility($event.ctrlKey)" class="hoverlink noselect">
      <span [ngClass]="FOLDER_ICONS['component']"></span>
      <span>Component</span>
    <!-- fucking weird - no closing tags -->
  </ul>
  <div class="search">
    <form *ngIf="filterForm" [formGroup]="filterForm" (ngSubmit)="filterFormSubmit(filterForm)">
      <input formControlName="query" type="text" placeholder="add filter" (focus)="filterFocused.next(true)" (focusout)="filterFocused.next(false)">
    </form>
    <div class="suggestions" [hidden]="!filterSuggestions.length">
      <ul class="suggestions-list">
        <li *ngFor="let filter of filterSuggestions.slice(0, 10)" (click)="addFilter(filter)">
          <span [ngSwitch]="filter.type">
            <span *ngSwitchCase="'property'">
              <span class="rounded">{{filter.display}}</span>
              <span>{{ filter.property == 'buy' ? '$' : '' }}{{ filter.value }}</span>
            </span>
            <span *ngSwitchCase="'emptyFolders'">
              <span class="rounded">{{filter.display}}</span>
            </span>
            <span *ngSwitchDefault>
              <span>{{ filter.value }}</span>

            </span>
          </span>
        </li>
        <li *ngIf="filterSuggestions.length > 10">...</li>
      </ul>
    </div>
  </div>
</div>
<div class="navigation">
  <ul class="filters">
    <li *ngFor="let filter of filters" [class.active]="filterActive(filter)">
      <span class="fa fa-remove remove" (click)="removeFilter(filter)"></span>
      <span class="fa" [ngClass]="a | typeToClass" *ngFor="let a of filter.affects"></span>
      <span>{{ filter.display + ' ' + filter.value }}</span>
    </li>
  </ul>
</div>
<div *ngFor="let folderName of job.folders.order">
  <app-simple-tree *ngIf="folderEnabled === folderName" [rootNode]="trees[folderName]" (componentEdit)="componentEdit($event)" (dropEvt)="handleDrop($event)"></app-simple-tree>
</div>
<app-nest [hidden]="!nestEnabled" [nest]="nestSubject" [order]="job.folders.order" (dropEvt)="handleDrop($event)"></app-nest>
